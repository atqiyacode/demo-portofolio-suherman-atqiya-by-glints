<h5 class="font-weight-bold mb-3">Landing Page</h5>
<div class="card">
  <div class="card-header bg-white">
    <div class="row">
      <div class="col-lg-6">
        <span class="h6 font-weight-bold">Daftar Pesan</span>
      </div>
      <div class="col-lg-6 d-block">
        <div class="float-right">
          <div class="input-group input-group-sm mb-3">
            <div class="input-group-prepend bg-white" style="border-radius: 10px;">
              <span class="input-group-text" id="inputGroup-sizing-sm"><i class="fa fa-calendar"></i></span>
            </div>
            <input class="form-control" ngxDaterangepickerMd [locale]="{applyLabel: 'OK', format: 'DD MMM YYYY'}"
              startKey="start" endKey="end" (change)="selected; onFilterDate($event)" opens="left"
              style="border-radius: 0 10px 10px 0;" placeholder="Filter Tanggal" [showCancel]="true" />
            <button class="mx-1 btn btn-sm btn-main float-right" (click)="exportToExcel()">Ekspor</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <table class="table table-borderless small card-body m-0 shadow-none" #subscriptionTable>
    <thead class="bg-light">
      <tr class="border-bottom">
        <th>Tanggal</th>
        <th>Pesan</th>
        <th>Nama</th>
        <th>Email</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr class="border-bottom" *ngFor="let item of dataSubscription | paginate: config; let i = index">
        <td>{{item.date}}</td>
        <td>{{item.message}}</td>
        <td>{{item.name}}</td>
        <td>{{item.email}}</td>
        <td class="text-center">
          <a (click)="detailSubscription(item)" class="btn btn-sm btn-icon " style="cursor: pointer;">
            <i class="far fa-trash-alt"></i>
          </a>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="card-footer">
    <div class="row">
      <div class="col-md-4 col-sm-3 d-flex">
        <div class="d-none d-sm-block">
          <small>Tampilkan per halaman</small>
        </div>
        <select (change)="onPageSizeChange($event)" [(ngModel)]="config.itemsPerPage" class="form-control-sm b-10 mx-1">
          <option *ngFor="let page of pageSizes">{{page}}
          </option>
        </select>
      </div>
      <div class="col-md-8 col-sm-9">
        <pagination-template #p="paginationApi" [id]="config.id" (pageChange)="onPageChange($event)">
          <div class="d-flex ">
            <span [class.disabled]="p.isFirstPage()" *ngIf="!p.isFirstPage()" (click)="p.previous()"
              class="px-3 mx-1 btn btn-sm btn-outline-secondary">
              Prev
            </span>
            <div *ngFor="let page of p.pages">
              <span (click)="p.setCurrent(page.value)" *ngIf="p.getCurrent() !== page.value"
                class="mx-1 btn btn-sm btn-outline-secondary">
                {{ page.label }}
              </span>
              <div *ngIf="p.getCurrent() === page.value">
                <span class="mx-1 btn btn-sm btn-secondary font-weight-bold">
                  {{ page.label }}
                </span>
              </div>
            </div>
            <div class="pagination-next" [class.disabled]="p.isLastPage()">
              <span class="px-3 mx-1 btn btn-sm btn-outline-secondary" *ngIf="!p.isLastPage()" (click)="p.next()"> Next
              </span>
            </div>
          </div>
        </pagination-template>
      </div>
    </div>
  </div>

</div>

<!-- modal subscription -->
<ng-template #modalSubscription let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="modalSubscriptionLabel">
      Detail Pesan Subscription
    </h5>
    <a class="close text-decoration-none" style="cursor: pointer;" (click)="modal.close()">
      <span aria-hidden="true">&times;</span>
    </a>
  </div>
  <div class="card card-body shadow-none">
    <div class="form-group">
      <span class="small text-muted mx-2">Tanggal</span>
      <span class="small font-weight-bold mx-2">
        {{detailItem.messageDate}}
      </span>
    </div>
    <div class="form-group">
      <span class="small text-muted mx-2">Nama</span>
      <span class="small font-weight-bold message-name mx-2">
        {{detailItem.messageName}}
      </span>
    </div>
    <div class="form-group">
      <span class="small mx-2 text-muted">Email</span>
      <span class="small mx-2 font-weight-bold message-email">
        {{detailItem.messageEmail}}
      </span>
    </div>
    <div class="form-group">
      <span class="small mx-2 text-muted">Pesan</span>
    </div>
    <div class="form-group">
      <span class="font-italic mx-2">
        {{detailItem.messageContent}}
      </span>
    </div>
    <div class="form-group row mt-3">
      <div class="col-md-6">
        <a class="btn btn-sm b-10 btn-outline-second-main py-2 px-3 float-left" (click)="modal.close()">
          Tutup
        </a>
      </div>
      <div class="col-md-6">
        <a class="btn btn-sm px-3 b-10 btn-outline-main float-right"
          (click)="deleteSubscription(detailItem.messageId); modal.close()">
          Hapus pesan ini
        </a>
      </div>
    </div>
  </div>

</ng-template>
